<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>faraday-atom.impl documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Faraday-atom 0.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>faraday-atom</span></div></div></li><li class="depth-2 branch"><a href="faraday-atom.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="faraday-atom.impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="faraday-atom.impl.html#var-*default-cas-sleep-ms*"><div class="inner"><span>*default-cas-sleep-ms*</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-*dynamo-list-hack*"><div class="inner"><span>*dynamo-list-hack*</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var--.3EKey"><div class="inner"><span>-&gt;Key</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-add-key"><div class="inner"><span>add-key</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-cas-put-item.21"><div class="inner"><span>cas-put-item!</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-find-raw-item"><div class="inner"><span>find-raw-item</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-find-raw-value"><div class="inner"><span>find-raw-value</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-fixed-batch-write-item"><div class="inner"><span>fixed-batch-write-item</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-native-key"><div class="inner"><span>native-key</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-prepare-value"><div class="inner"><span>prepare-value</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-read-item"><div class="inner"><span>read-item</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-read-key"><div class="inner"><span>read-key</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-read-value"><div class="inner"><span>read-value</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-read-value*"><div class="inner"><span>read-value*</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-swap-item.21"><div class="inner"><span>swap-item!</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-swap-item.21*"><div class="inner"><span>swap-item!*</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-table-client-.3Eoptions"><div class="inner"><span>table-client-&gt;options</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-write-key"><div class="inner"><span>write-key</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-write-value"><div class="inner"><span>write-value</span></div></a></li><li class="depth-1"><a href="faraday-atom.impl.html#var-write-value*"><div class="inner"><span>write-value*</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">faraday-atom.impl</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-*default-cas-sleep-ms*"><h3>*default-cas-sleep-ms*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>When we hit contention we will wait this long before attempting the CAS operation again by default.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L167">view source</a></div></div><div class="public anchor" id="var-*dynamo-list-hack*"><h3>*dynamo-list-hack*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L107">view source</a></div></div><div class="public anchor" id="var--.3EKey"><h3>-&gt;Key</h3><div class="usage"><code>(-&gt;Key x)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class faraday_atom.impl.Key.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L23">view source</a></div></div><div class="public anchor" id="var-add-key"><h3>add-key</h3><div class="usage"><code>(add-key prepared-value key-name key)</code></div><div class="doc"><div class="markdown"><p>Writes the (encoded) key to the value</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L100">view source</a></div></div><div class="public anchor" id="var-cas-put-item.21"><h3>cas-put-item!</h3><div class="usage"><code>(cas-put-item! table-client key value version)</code></div><div class="doc"><div class="markdown"><p>Overwrites the value under <code>key</code> only if - The version provided matches the previous version of the item - There is not data currently under <code>key</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L150">view source</a></div></div><div class="public anchor" id="var-find-raw-item"><h3>find-raw-item</h3><div class="usage"><code>(find-raw-item table-client key)</code></div><div class="doc"><div class="markdown"><p>Finds the item at <code>key</code>, will unencode the value but will not do any further pruning.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L133">view source</a></div></div><div class="public anchor" id="var-find-raw-value"><h3>find-raw-value</h3><div class="usage"><code>(find-raw-value table-client key)</code></div><div class="doc"><div class="markdown"><p>Performs a consistent faraday lookup against <code>key</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L127">view source</a></div></div><div class="public anchor" id="var-fixed-batch-write-item"><h3>fixed-batch-write-item</h3><div class="usage"><code>(fixed-batch-write-item client-opts request)</code></div><div class="doc"><div class="markdown"><p>To get around an issue with batch-write-item and lists (namely they aren&rsquo;t supported properly)</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L116">view source</a></div></div><div class="public anchor" id="var-native-key"><h3>native-key</h3><div class="usage"><code>(native-key x)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L70">view source</a></div></div><div class="public anchor" id="var-prepare-value"><h3>prepare-value</h3><div class="usage"><code>(prepare-value value key-name)</code></div><div class="doc"><div class="markdown"><p>Makes sure the value is a map, makes sure if there is an existing value under the encoded<code>key-name</code> it is preserved. Should be called before <code>write-value</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L86">view source</a></div></div><div class="public anchor" id="var-read-item"><h3>read-item</h3><div class="usage"><code>(read-item read-value key-name)</code></div><div class="doc"><div class="markdown"><p>Takes a value that has been unencoded and returns the original value from the prepared map</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L140">view source</a></div></div><div class="public anchor" id="var-read-key"><h3>read-key</h3><div class="usage"><code>(read-key x)</code></div><div class="doc"><div class="markdown"><p>Reads an encoded dynamo key</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L63">view source</a></div></div><div class="public anchor" id="var-read-value"><h3>read-value</h3><div class="usage"><code>(read-value x)</code></div><div class="doc"><div class="markdown"><p>Reads an encoded dynamo value</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L58">view source</a></div></div><div class="public anchor" id="var-read-value*"><h3>read-value*</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L36">view source</a></div></div><div class="public anchor" id="var-swap-item.21"><h3>swap-item!</h3><div class="usage"><code>(swap-item! table-client key f)</code><code>(swap-item! table-client key f &amp; args)</code></div><div class="doc"><div class="markdown"><p>Applies the function <code>f</code> and any <code>args</code> to the value currently under <code>key</code> storing the result. Returns the result.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L205">view source</a></div></div><div class="public anchor" id="var-swap-item.21*"><h3>swap-item!*</h3><div class="usage"><code>(swap-item!* table-client key f {:keys [cas-sleep-ms cas-timeout-ms cas-timeout-val discard-no-op?], :as options})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L172">view source</a></div></div><div class="public anchor" id="var-table-client-.3Eoptions"><h3>table-client-&gt;options</h3><div class="usage"><code>(table-client-&gt;options table-client)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L196">view source</a></div></div><div class="public anchor" id="var-write-key"><h3>write-key</h3><div class="usage"><code>(write-key x)</code></div><div class="doc"><div class="markdown"><p>Keys must be encoded differently, as regardless of the type, they have to be encoded as strings.</p><p>This function will allow you to write a non-string key if one wishes.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L76">view source</a></div></div><div class="public anchor" id="var-write-value"><h3>write-value</h3><div class="usage"><code>(write-value x)</code></div><div class="doc"><div class="markdown"><p>Encodes the given value for dynamo</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L53">view source</a></div></div><div class="public anchor" id="var-write-value*"><h3>write-value*</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/impl.clj#L8">view source</a></div></div></div></body></html>