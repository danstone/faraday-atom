<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>faraday-atom.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Faraday-atom 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>faraday-atom</span></div></div></li><li class="depth-2 branch current"><a href="faraday-atom.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="faraday-atom.impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="faraday-atom.core.html#var-*default-read-throughput*"><div class="inner"><span>*default-read-throughput*</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-*default-write-throughput*"><div class="inner"><span>*default-write-throughput*</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var--.3EItemAtom"><div class="inner"><span>-&gt;ItemAtom</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var--.3ETableClient"><div class="inner"><span>-&gt;TableClient</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-create-table.21"><div class="inner"><span>create-table!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-delete-item.21"><div class="inner"><span>delete-item!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-delete-items.21"><div class="inner"><span>delete-items!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-ensure-table.21"><div class="inner"><span>ensure-table!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-inconsistent-item"><div class="inner"><span>find-inconsistent-item</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-inconsistent-item-mapping"><div class="inner"><span>find-inconsistent-item-mapping</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-inconsistent-items"><div class="inner"><span>find-inconsistent-items</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-item"><div class="inner"><span>find-item</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-item-mapping"><div class="inner"><span>find-item-mapping</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-find-items"><div class="inner"><span>find-items</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-item-atom"><div class="inner"><span>item-atom</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-map-.3EItemAtom"><div class="inner"><span>map-&gt;ItemAtom</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-map-.3ETableClient"><div class="inner"><span>map-&gt;TableClient</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-put-item.21"><div class="inner"><span>put-item!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-put-items.21"><div class="inner"><span>put-items!</span></div></a></li><li class="depth-1"><a href="faraday-atom.core.html#var-table-client"><div class="inner"><span>table-client</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">faraday-atom.core</h2><div class="doc"><div class="markdown"><p>A dynamo atom implementation - keys are always encoded as strings - maps and vectors are stored natively - byte arrays are stored natively as binary blobs - numerics are encoded as strings - strings are quoted - sets/lists are encoded as strings</p></div></div><div class="public anchor" id="var-*default-read-throughput*"><h3>*default-read-throughput*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>The default amount of read throughput for tables created via <code>create-table!</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L86">view source</a></div></div><div class="public anchor" id="var-*default-write-throughput*"><h3>*default-write-throughput*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>The default amount of write throughput for tables created via <code>create-table!</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L90">view source</a></div></div><div class="public anchor" id="var--.3EItemAtom"><h3>-&gt;ItemAtom</h3><div class="usage"><code>(-&gt;ItemAtom table-client key cas-sleep-ms cas-timeout-ms cas-timeout-val)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class faraday_atom.core.ItemAtom.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L150">view source</a></div></div><div class="public anchor" id="var--.3ETableClient"><h3>-&gt;TableClient</h3><div class="usage"><code>(-&gt;TableClient client-opts table key-name)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class faraday_atom.core.TableClient.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L14">view source</a></div></div><div class="public anchor" id="var-create-table.21"><h3>create-table!</h3><div class="usage"><code>(create-table! table-client)</code><code>(create-table! table-client read-throughput write-throughput)</code></div><div class="doc"><div class="markdown"><p>Creates a table suitable for storing data according to the encoding scheme.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L94">view source</a></div></div><div class="public anchor" id="var-delete-item.21"><h3>delete-item!</h3><div class="usage"><code>(delete-item! table-client key)</code></div><div class="doc"><div class="markdown"><p>Deletes the item stored under <code>key</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L144">view source</a></div></div><div class="public anchor" id="var-delete-items.21"><h3>delete-items!</h3><div class="usage"><code>(delete-items! table-client keys)</code></div><div class="doc"><div class="markdown"><p>Deletes the items whose key is listed in <code>keys</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L135">view source</a></div></div><div class="public anchor" id="var-ensure-table.21"><h3>ensure-table!</h3><div class="usage"><code>(ensure-table! table-client)</code><code>(ensure-table! table-client read-throughput write-throughput)</code></div><div class="doc"><div class="markdown"><p>Creates a table suitable for storing data according to the encoding scheme, unless it already exists.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L103">view source</a></div></div><div class="public anchor" id="var-find-inconsistent-item"><h3>find-inconsistent-item</h3><div class="usage"><code>(find-inconsistent-item table-client key)</code></div><div class="doc"><div class="markdown"><p>Eventually consistent version of <code>find-item</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L78">view source</a></div></div><div class="public anchor" id="var-find-inconsistent-item-mapping"><h3>find-inconsistent-item-mapping</h3><div class="usage"><code>(find-inconsistent-item-mapping table-client keys)</code></div><div class="doc"><div class="markdown"><p>Eventually consistent version of <code>find-item-mapping</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L47">view source</a></div></div><div class="public anchor" id="var-find-inconsistent-items"><h3>find-inconsistent-items</h3><div class="usage"><code>(find-inconsistent-items table-client keys)</code></div><div class="doc"><div class="markdown"><p>Eventually consistent version of <code>find-items</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L66">view source</a></div></div><div class="public anchor" id="var-find-item"><h3>find-item</h3><div class="usage"><code>(find-item table-client key)</code></div><div class="doc"><div class="markdown"><p>Finds the item stored under <code>key</code>.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L71">view source</a></div></div><div class="public anchor" id="var-find-item-mapping"><h3>find-item-mapping</h3><div class="usage"><code>(find-item-mapping table-client keys)</code></div><div class="doc"><div class="markdown"><p>Lookups the given coll of <code>keys</code> and returns a map from key to item. If an item isn&rsquo;t found, the key will be missing from the result.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L40">view source</a></div></div><div class="public anchor" id="var-find-items"><h3>find-items</h3><div class="usage"><code>(find-items table-client keys)</code></div><div class="doc"><div class="markdown"><p>Looks up a the items given by keys. Returns a seq of items, keys that could not be found will be omitted.</p><p>Each item will be read consistently.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L58">view source</a></div></div><div class="public anchor" id="var-item-atom"><h3>item-atom</h3><div class="usage"><code>(item-atom table-client key)</code><code>(item-atom table-client key opts)</code></div><div class="doc"><div class="markdown"><p>Returns a clojure.lang.IAtom/IDeref that supports atomic state transition via conditional puts on a single dynamo item. In order to use an atom, get started by creating a compatible table via <code>create-table!</code> or <code>ensure-table!</code>.</p><p>opts: - <code>:cas-sleep-ms</code> the amount of time to wait in the case of contention with other CAS operations (default 500ms) - <code>:cas-timeout-ms</code> the amount of time that in the case of contention you are willing to retry for.  if this elapses the <code>:cas-timeout-val</code> is returned instead of the result of the <code>swap!</code>.  If you want to retry for ever, use <code>nil</code>. (default <code>nil</code>) - <code>:cas-timeout-val</code> the value to return if we timeout due to CAS contention (default <code>nil</code>).</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L169">view source</a></div></div><div class="public anchor" id="var-map-.3EItemAtom"><h3>map-&gt;ItemAtom</h3><div class="usage"><code>(map-&gt;ItemAtom m__6289__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class faraday_atom.core.ItemAtom, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L150">view source</a></div></div><div class="public anchor" id="var-map-.3ETableClient"><h3>map-&gt;TableClient</h3><div class="usage"><code>(map-&gt;TableClient m__6289__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class faraday_atom.core.TableClient, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L14">view source</a></div></div><div class="public anchor" id="var-put-item.21"><h3>put-item!</h3><div class="usage"><code>(put-item! table-client key value)</code></div><div class="doc"><div class="markdown"><p>Stores the value under <code>key</code></p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L114">view source</a></div></div><div class="public anchor" id="var-put-items.21"><h3>put-items!</h3><div class="usage"><code>(put-items! table-client kvs)</code></div><div class="doc"><div class="markdown"><p>Stores each value in <code>kvs</code> under its corresponding key. <code>kvs</code> should be a map or a seq of key value pairs.</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L122">view source</a></div></div><div class="public anchor" id="var-table-client"><h3>table-client</h3><div class="usage"><code>(table-client client-opts table key-name)</code></div><div class="doc"><div class="markdown"><p>A table client represents a &lsquo;connection&rsquo; via faraday to the given table using the given key-name (hash key column)</p></div></div><div class="src-link"><a href="http://github.com/mixradio/faraday-atom/blob/master/src/faraday_atom/core.clj#L16">view source</a></div></div></div></body></html>